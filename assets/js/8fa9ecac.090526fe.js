"use strict";(globalThis.webpackChunkphysical_humanoid_ai_book=globalThis.webpackChunkphysical_humanoid_ai_book||[]).push([[619],{5467(e,n,i){i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>c,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"module1-ros2/chapter1-architecture","title":"Chapter 1: ROS 2 Architecture Fundamentals","description":"Learning Objectives","source":"@site/docs/module1-ros2/chapter1-architecture.md","sourceDirName":"module1-ros2","slug":"/module1-ros2/chapter1-architecture","permalink":"/physical-humanoid-ai-book/docs/module1-ros2/chapter1-architecture","draft":false,"unlisted":false,"editUrl":"https://github.com/alizah-fatima/physical-humanoid-ai-book/tree/main/docs/module1-ros2/chapter1-architecture.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Introduction to Physical AI & Humanoid Robotics","permalink":"/physical-humanoid-ai-book/docs/intro"},"next":{"title":"Chapter 2: Building ROS 2 Packages with Python and Bridging to AI Agents","permalink":"/physical-humanoid-ai-book/docs/module1-ros2/chapter2-python-packages"}}');var t=i(4848),r=i(8453);const c={sidebar_position:1},l="Chapter 1: ROS 2 Architecture Fundamentals",a={},o=[{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"Introduction to ROS 2 Architecture",id:"introduction-to-ros-2-architecture",level:2},{value:"Nodes",id:"nodes",level:2},{value:"What is a Node?",id:"what-is-a-node",level:3},{value:"Key Characteristics of Nodes",id:"key-characteristics-of-nodes",level:3},{value:"Node Implementation Example",id:"node-implementation-example",level:3},{value:"Topics",id:"topics",level:2},{value:"What is a Topic?",id:"what-is-a-topic",level:3},{value:"Key Characteristics of Topics",id:"key-characteristics-of-topics",level:3},{value:"Topic Communication Flow",id:"topic-communication-flow",level:3},{value:"Topic Example",id:"topic-example",level:3},{value:"Services",id:"services",level:2},{value:"What is a Service?",id:"what-is-a-service",level:3},{value:"Key Characteristics of Services",id:"key-characteristics-of-services",level:3},{value:"Service Communication Flow",id:"service-communication-flow",level:3},{value:"Service Example",id:"service-example",level:3},{value:"Actions",id:"actions",level:2},{value:"What is an Action?",id:"what-is-an-action",level:3},{value:"Key Characteristics of Actions",id:"key-characteristics-of-actions",level:3},{value:"Action Communication Flow",id:"action-communication-flow",level:3},{value:"Action Example",id:"action-example",level:3},{value:"Comparison of Communication Patterns",id:"comparison-of-communication-patterns",level:2},{value:"Communication Architecture Diagram",id:"communication-architecture-diagram",level:2},{value:"Detailed Communication Patterns",id:"detailed-communication-patterns",level:2},{value:"Topic Communication Pattern",id:"topic-communication-pattern",level:3},{value:"Service Communication Pattern",id:"service-communication-pattern",level:3},{value:"Action Communication Pattern",id:"action-communication-pattern",level:3},{value:"Code Examples and Implementation Details",id:"code-examples-and-implementation-details",level:2},{value:"Complete Publisher Node Example",id:"complete-publisher-node-example",level:3},{value:"Complete Subscriber Node Example",id:"complete-subscriber-node-example",level:3},{value:"Service Server Example",id:"service-server-example",level:3},{value:"Service Client Example",id:"service-client-example",level:3},{value:"Architecture Component Summary",id:"architecture-component-summary",level:2},{value:"Node Characteristics",id:"node-characteristics",level:3},{value:"Topic Communication Parameters",id:"topic-communication-parameters",level:3},{value:"Service vs Action Comparison",id:"service-vs-action-comparison",level:3},{value:"DDS Implementation Details",id:"dds-implementation-details",level:3},{value:"Summary",id:"summary",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"chapter-1-ros-2-architecture-fundamentals",children:"Chapter 1: ROS 2 Architecture Fundamentals"})}),"\n",(0,t.jsx)(n.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,t.jsx)(n.p,{children:"By the end of this chapter, you will be able to:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Explain the fundamental concepts of ROS 2 architecture"}),"\n",(0,t.jsx)(n.li,{children:"Identify and differentiate between nodes, topics, services, and actions"}),"\n",(0,t.jsx)(n.li,{children:"Understand how these components interact in a distributed system"}),"\n",(0,t.jsx)(n.li,{children:"Visualize the communication patterns in ROS 2"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"introduction-to-ros-2-architecture",children:"Introduction to ROS 2 Architecture"}),"\n",(0,t.jsx)(n.p,{children:"ROS 2 (Robot Operating System 2) is a flexible framework for writing robot software. It is a collection of tools, libraries, and conventions that aim to simplify the task of creating complex and robust robot behavior across a wide variety of robot platforms. The architecture of ROS 2 is designed to support distributed computing, real-time operations, and embedded systems."}),"\n",(0,t.jsx)(n.p,{children:"Unlike its predecessor ROS 1, ROS 2 is built on DDS (Data Distribution Service), which provides a middleware that enables scalable, real-time, reliable, and interoperable data exchanges between devices and applications."}),"\n",(0,t.jsx)(n.h2,{id:"nodes",children:"Nodes"}),"\n",(0,t.jsx)(n.h3,{id:"what-is-a-node",children:"What is a Node?"}),"\n",(0,t.jsxs)(n.p,{children:["A ",(0,t.jsx)(n.strong,{children:"node"})," is a process that performs computation. Nodes are the fundamental building blocks of ROS 2 applications. Each node is designed to perform a specific task, such as sensor data processing, motion planning, or control algorithms."]}),"\n",(0,t.jsx)(n.h3,{id:"key-characteristics-of-nodes",children:"Key Characteristics of Nodes"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Modularity"}),": Each node performs a specific function"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Communication"}),": Nodes communicate with each other through topics, services, or actions"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Process"}),": Each node runs as a separate process"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Lifecycle"}),": Nodes can have different lifecycle states (unconfigured, inactive, active, finalized)"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"node-implementation-example",children:"Node Implementation Example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\n\nclass MinimalPublisher(Node):\n\n    def __init__(self):\n        super().__init__('minimal_publisher')\n        self.publisher_ = self.create_publisher(String, 'topic', 10)\n        timer_period = 0.5  # seconds\n        self.timer = self.create_timer(timer_period, self.timer_callback)\n        self.i = 0\n\n    def timer_callback(self):\n        msg = String()\n        msg.data = 'Hello World: %d' % self.i\n        self.publisher_.publish(msg)\n        self.get_logger().info('Publishing: \"%s\"' % msg.data)\n        self.i += 1\n"})}),"\n",(0,t.jsx)(n.h2,{id:"topics",children:"Topics"}),"\n",(0,t.jsx)(n.h3,{id:"what-is-a-topic",children:"What is a Topic?"}),"\n",(0,t.jsxs)(n.p,{children:["A ",(0,t.jsx)(n.strong,{children:"topic"})," is an asynchronous, unidirectional, many-to-many communication mechanism in ROS 2. Topics enable data exchange between nodes using a publish-subscribe pattern."]}),"\n",(0,t.jsx)(n.h3,{id:"key-characteristics-of-topics",children:"Key Characteristics of Topics"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Publish-Subscribe Pattern"}),": Publishers send messages to a topic, subscribers receive messages from the topic"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Asynchronous"}),": Publishers and subscribers don't need to be synchronized"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Many-to-Many"}),": Multiple publishers can publish to the same topic, multiple subscribers can subscribe to the same topic"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Message Types"}),": Each topic has a specific message type that defines the structure of the data"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"topic-communication-flow",children:"Topic Communication Flow"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"A node creates a publisher for a specific topic"}),"\n",(0,t.jsx)(n.li,{children:"Another node creates a subscriber for the same topic"}),"\n",(0,t.jsx)(n.li,{children:"The publisher sends messages to the topic"}),"\n",(0,t.jsx)(n.li,{children:"The DDS middleware delivers messages to all subscribers of that topic"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"topic-example",children:"Topic Example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"# Publisher example\npublisher = self.create_publisher(String, 'chatter', 10)\n\n# Subscriber example\nsubscription = self.create_subscription(\n    String,\n    'chatter',\n    self.listener_callback,\n    10)\n\ndef listener_callback(self, msg):\n    self.get_logger().info('I heard: \"%s\"' % msg.data)\n"})}),"\n",(0,t.jsx)(n.h2,{id:"services",children:"Services"}),"\n",(0,t.jsx)(n.h3,{id:"what-is-a-service",children:"What is a Service?"}),"\n",(0,t.jsxs)(n.p,{children:["A ",(0,t.jsx)(n.strong,{children:"service"})," is a synchronous, bidirectional, request-response communication mechanism in ROS 2. Services enable a client-server communication pattern where a client sends a request and waits for a response."]}),"\n",(0,t.jsx)(n.h3,{id:"key-characteristics-of-services",children:"Key Characteristics of Services"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Request-Response Pattern"}),": Client sends a request, server responds"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Synchronous"}),": Client waits for the response before continuing"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"One-to-One"}),": Typically one client communicates with one server"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Service Types"}),": Each service has a specific service type that defines the request and response structure"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"service-communication-flow",children:"Service Communication Flow"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"A node creates a service server for a specific service type"}),"\n",(0,t.jsx)(n.li,{children:"Another node creates a client for the same service type"}),"\n",(0,t.jsx)(n.li,{children:"The client sends a request to the service"}),"\n",(0,t.jsx)(n.li,{children:"The server processes the request and sends a response back to the client"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"service-example",children:"Service Example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"# Service server example\nself.srv = self.create_service(AddTwoInts, 'add_two_ints', self.add_two_ints_callback)\n\ndef add_two_ints_callback(self, request, response):\n    response.sum = request.a + request.b\n    self.get_logger().info('Incoming request\\na: %d b: %d' % (request.a, request.b))\n    return response\n\n# Service client example\nself.cli = self.create_client(AddTwoInts, 'add_two_ints')\n"})}),"\n",(0,t.jsx)(n.h2,{id:"actions",children:"Actions"}),"\n",(0,t.jsx)(n.h3,{id:"what-is-an-action",children:"What is an Action?"}),"\n",(0,t.jsxs)(n.p,{children:["An ",(0,t.jsx)(n.strong,{children:"action"})," is a communication pattern in ROS 2 that extends the service pattern to support long-running tasks with feedback and goal management. Actions are used for tasks that take a significant amount of time to complete."]}),"\n",(0,t.jsx)(n.h3,{id:"key-characteristics-of-actions",children:"Key Characteristics of Actions"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Long-Running Tasks"}),": Designed for operations that take time to complete"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Goal-Feeback-Result Pattern"}),": Supports goal setting, ongoing feedback, and final result"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Cancelation"}),": Clients can cancel ongoing goals"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Preemption"}),": New goals can preempt existing ones"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"action-communication-flow",children:"Action Communication Flow"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"A client sends a goal to an action server"}),"\n",(0,t.jsx)(n.li,{children:"The server may send feedback about the goal's progress"}),"\n",(0,t.jsx)(n.li,{children:"The server sends the final result when the goal is completed"}),"\n",(0,t.jsx)(n.li,{children:"The client can cancel the goal or send a new goal to preempt the current one"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"action-example",children:"Action Example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"# Action server example\nfrom rclpy.action import ActionServer\nfrom example_interfaces.action import Fibonacci\n\nclass FibonacciActionServer(Node):\n\n    def __init__(self):\n        super().__init__('fibonacci_action_server')\n        self._action_server = ActionServer(\n            self,\n            Fibonacci,\n            'fibonacci',\n            self.execute_callback)\n\n    def execute_callback(self, goal_handle):\n        self.get_logger().info('Executing goal...')\n\n        feedback_msg = Fibonacci.Feedback()\n        feedback_msg.sequence = [0, 1]\n\n        for i in range(1, goal_handle.request.order):\n            if goal_handle.is_cancel_requested:\n                goal_handle.canceled()\n                self.get_logger().info('Goal canceled')\n                return Fibonacci.Result()\n\n            feedback_msg.sequence.append(\n                feedback_msg.sequence[i] + feedback_msg.sequence[i-1])\n\n            goal_handle.publish_feedback(feedback_msg)\n\n        goal_handle.succeed()\n        result = Fibonacci.Result()\n        result.sequence = feedback_msg.sequence\n        return result\n"})}),"\n",(0,t.jsx)(n.h2,{id:"comparison-of-communication-patterns",children:"Comparison of Communication Patterns"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Feature"}),(0,t.jsx)(n.th,{children:"Topics"}),(0,t.jsx)(n.th,{children:"Services"}),(0,t.jsx)(n.th,{children:"Actions"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Pattern"}),(0,t.jsx)(n.td,{children:"Publish-Subscribe"}),(0,t.jsx)(n.td,{children:"Request-Response"}),(0,t.jsx)(n.td,{children:"Goal-Feedback-Result"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Synchronization"}),(0,t.jsx)(n.td,{children:"Asynchronous"}),(0,t.jsx)(n.td,{children:"Synchronous"}),(0,t.jsx)(n.td,{children:"Asynchronous with feedback"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Duration"}),(0,t.jsx)(n.td,{children:"Continuous"}),(0,t.jsx)(n.td,{children:"Short-term"}),(0,t.jsx)(n.td,{children:"Long-term"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Communication"}),(0,t.jsx)(n.td,{children:"Many-to-Many"}),(0,t.jsx)(n.td,{children:"One-to-One"}),(0,t.jsx)(n.td,{children:"One-to-One"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Cancelation"}),(0,t.jsx)(n.td,{children:"No"}),(0,t.jsx)(n.td,{children:"No"}),(0,t.jsx)(n.td,{children:"Yes"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Feedback"}),(0,t.jsx)(n.td,{children:"No"}),(0,t.jsx)(n.td,{children:"No"}),(0,t.jsx)(n.td,{children:"Yes"})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"communication-architecture-diagram",children:"Communication Architecture Diagram"}),"\n",(0,t.jsx)(n.mermaid,{value:"graph TD\n    A[Node A] --\x3e|Publishes to| B[Topic]\n    C[Node B] --\x3e|Subscribes to| B[Topic]\n    D[Node C] --\x3e|Publishes to| B[Topic]\n    E[Node D] --\x3e|Subscribes to| B[Topic]\n\n    F[Node E] --\x3e|Requests| G[Service]\n    G[Service] --\x3e|Responds| F[Node E]\n    H[Node F] --\x3e|Requests| G[Service]\n\n    I[Node G] --\x3e|Sends Goal| J[Action Server]\n    J[Action Server] --\x3e|Sends Feedback| I[Node G]\n    J[Action Server] --\x3e|Sends Result| I[Node G]"}),"\n",(0,t.jsx)(n.h2,{id:"detailed-communication-patterns",children:"Detailed Communication Patterns"}),"\n",(0,t.jsx)(n.h3,{id:"topic-communication-pattern",children:"Topic Communication Pattern"}),"\n",(0,t.jsx)(n.mermaid,{value:"graph LR\n    Publisher[Publisher Node] --\x3e|Messages| DDS[DDS Middleware]\n    DDS --\x3e|Distributes| Subscriber1[Subscriber Node 1]\n    DDS --\x3e|Distributes| Subscriber2[Subscriber Node 2]\n    DDS --\x3e|Distributes| Subscriber3[Subscriber Node 3]\n\n    style Publisher fill:#e1f5fe\n    style Subscriber1 fill:#f3e5f5\n    style Subscriber2 fill:#f3e5f5\n    style Subscriber3 fill:#f3e5f5\n    style DDS fill:#fff3e0"}),"\n",(0,t.jsx)(n.h3,{id:"service-communication-pattern",children:"Service Communication Pattern"}),"\n",(0,t.jsx)(n.mermaid,{value:"sequenceDiagram\n    participant Client as Client Node\n    participant Server as Service Server\n\n    Client->>Server: Request\n    Server->>Client: Response"}),"\n",(0,t.jsx)(n.h3,{id:"action-communication-pattern",children:"Action Communication Pattern"}),"\n",(0,t.jsx)(n.mermaid,{value:"sequenceDiagram\n    participant Client as Action Client\n    participant Server as Action Server\n\n    Client->>Server: Goal Request\n    loop Feedback\n        Server->>Client: Feedback\n    end\n    Server->>Client: Result"}),"\n",(0,t.jsx)(n.h2,{id:"code-examples-and-implementation-details",children:"Code Examples and Implementation Details"}),"\n",(0,t.jsx)(n.h3,{id:"complete-publisher-node-example",children:"Complete Publisher Node Example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\n\n\nclass MinimalPublisher(Node):\n\n    def __init__(self):\n        super().__init__('minimal_publisher')\n        self.publisher_ = self.create_publisher(String, 'topic', 10)\n        timer_period = 0.5  # seconds\n        self.timer = self.create_timer(timer_period, self.timer_callback)\n        self.i = 0\n\n    def timer_callback(self):\n        msg = String()\n        msg.data = 'Hello World: %d' % self.i\n        self.publisher_.publish(msg)\n        self.get_logger().info('Publishing: \"%s\"' % msg.data)\n        self.i += 1\n\n\ndef main(args=None):\n    rclpy.init(args=args)\n\n    minimal_publisher = MinimalPublisher()\n\n    rclpy.spin(minimal_publisher)\n\n    # Destroy the node explicitly\n    minimal_publisher.destroy_node()\n    rclpy.shutdown()\n\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,t.jsx)(n.h3,{id:"complete-subscriber-node-example",children:"Complete Subscriber Node Example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\n\n\nclass MinimalSubscriber(Node):\n\n    def __init__(self):\n        super().__init__('minimal_subscriber')\n        self.subscription = self.create_subscription(\n            String,\n            'topic',\n            self.listener_callback,\n            10)\n        self.subscription  # prevent unused variable warning\n\n    def listener_callback(self, msg):\n        self.get_logger().info('I heard: \"%s\"' % msg.data)\n\n\ndef main(args=None):\n    rclpy.init(args=args)\n\n    minimal_subscriber = MinimalSubscriber()\n\n    rclpy.spin(minimal_subscriber)\n\n    # Destroy the node explicitly\n    minimal_subscriber.destroy_node()\n    rclpy.shutdown()\n\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,t.jsx)(n.h3,{id:"service-server-example",children:"Service Server Example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"from add_two_ints_srv.srv import AddTwoInts\nimport rclpy\nfrom rclpy.node import Node\n\n\nclass MinimalService(Node):\n\n    def __init__(self):\n        super().__init__('minimal_service')\n        self.srv = self.create_service(AddTwoInts, 'add_two_ints', self.add_two_ints_callback)\n\n    def add_two_ints_callback(self, request, response):\n        response.sum = request.a + request.b\n        self.get_logger().info('Incoming request\\na: %d b: %d' % (request.a, request.b))\n\n        return response\n\n\ndef main(args=None):\n    rclpy.init(args=args)\n\n    minimal_service = MinimalService()\n\n    rclpy.spin(minimal_service)\n\n    rclpy.shutdown()\n\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,t.jsx)(n.h3,{id:"service-client-example",children:"Service Client Example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"from add_two_ints_srv.srv import AddTwoInts\nimport rclpy\nfrom rclpy.node import Node\n\n\nclass MinimalClientAsync(Node):\n\n    def __init__(self):\n        super().__init__('minimal_client_async')\n        self.cli = self.create_client(AddTwoInts, 'add_two_ints')\n        while not self.cli.wait_for_service(timeout_sec=1.0):\n            self.get_logger().info('service not available, waiting again...')\n        self.req = AddTwoInts.Request()\n\n    def send_request(self):\n        self.req.a = 41\n        self.req.b = 1\n        self.future = self.cli.call_async(self.req)\n        rclpy.spin_until_future_complete(self, self.future)\n        return self.future.result()\n\n\ndef main():\n    rclpy.init()\n\n    minimal_client = MinimalClientAsync()\n    response = minimal_client.send_request()\n    minimal_client.get_logger().info(\n        'Result of add_two_ints: for %d + %d = %d' %\n        (minimal_client.req.a, minimal_client.req.b, response.sum))\n\n    minimal_client.destroy_node()\n    rclpy.shutdown()\n\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,t.jsx)(n.h2,{id:"architecture-component-summary",children:"Architecture Component Summary"}),"\n",(0,t.jsx)(n.h3,{id:"node-characteristics",children:"Node Characteristics"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Aspect"}),(0,t.jsx)(n.th,{children:"Details"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Purpose"}),(0,t.jsx)(n.td,{children:"Execute computation and provide functionality"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Communication"}),(0,t.jsx)(n.td,{children:"Interacts via topics, services, actions"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Lifecycle"}),(0,t.jsx)(n.td,{children:"Unconfigured \u2192 Inactive \u2192 Active \u2192 Finalized"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Implementation"}),(0,t.jsx)(n.td,{children:"Separate processes in the system"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Best Practices"}),(0,t.jsx)(n.td,{children:"Single responsibility, clear interfaces"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"topic-communication-parameters",children:"Topic Communication Parameters"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Parameter"}),(0,t.jsx)(n.th,{children:"Description"}),(0,t.jsx)(n.th,{children:"Typical Values"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"QoS History"}),(0,t.jsx)(n.td,{children:"Number of messages to store"}),(0,t.jsx)(n.td,{children:"KEEP_LAST (1-10), KEEP_ALL"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"QoS Depth"}),(0,t.jsx)(n.td,{children:"Size of the history queue"}),(0,t.jsx)(n.td,{children:"1-1000 (depending on use case)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"QoS Reliability"}),(0,t.jsx)(n.td,{children:"Delivery guarantee"}),(0,t.jsx)(n.td,{children:"RELIABLE, BEST_EFFORT"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"QoS Durability"}),(0,t.jsx)(n.td,{children:"Availability for late-joining nodes"}),(0,t.jsx)(n.td,{children:"VOLATILE, TRANSIENT_LOCAL"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"service-vs-action-comparison",children:"Service vs Action Comparison"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Aspect"}),(0,t.jsx)(n.th,{children:"Services"}),(0,t.jsx)(n.th,{children:"Actions"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Duration"}),(0,t.jsx)(n.td,{children:"Short-term operations"}),(0,t.jsx)(n.td,{children:"Long-term operations"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Feedback"}),(0,t.jsx)(n.td,{children:"No ongoing feedback"}),(0,t.jsx)(n.td,{children:"Continuous feedback"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Cancelation"}),(0,t.jsx)(n.td,{children:"No cancelation"}),(0,t.jsx)(n.td,{children:"Goal cancelation supported"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Preemption"}),(0,t.jsx)(n.td,{children:"No preemption"}),(0,t.jsx)(n.td,{children:"Goal preemption supported"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Use Cases"}),(0,t.jsx)(n.td,{children:"Simple queries, commands"}),(0,t.jsx)(n.td,{children:"Navigation, manipulation, complex tasks"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Complexity"}),(0,t.jsx)(n.td,{children:"Lower complexity"}),(0,t.jsx)(n.td,{children:"Higher complexity"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"dds-implementation-details",children:"DDS Implementation Details"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Feature"}),(0,t.jsx)(n.th,{children:"ROS 2 Implementation"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Middleware"}),(0,t.jsx)(n.td,{children:"DDS (Data Distribution Service)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Communication"}),(0,t.jsx)(n.td,{children:"Publish-subscribe, request-response"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Transport"}),(0,t.jsx)(n.td,{children:"UDP, TCP, shared memory"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Discovery"}),(0,t.jsx)(n.td,{children:"Automatic participant discovery"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Quality of Service"}),(0,t.jsx)(n.td,{children:"Configurable reliability, durability, etc."})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,t.jsx)(n.p,{children:"ROS 2 architecture provides a flexible and robust framework for building distributed robotic systems. The three main communication patterns - topics, services, and actions - each serve different purposes:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Topics"})," for continuous, asynchronous data streams"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Services"})," for synchronous request-response interactions"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Actions"})," for long-running tasks with feedback and cancelation"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Understanding these fundamental concepts is crucial for building effective ROS 2 applications and serves as the foundation for more advanced topics in robotics development."})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453(e,n,i){i.d(n,{R:()=>c,x:()=>l});var s=i(6540);const t={},r=s.createContext(t);function c(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:c(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);